
Описание теоретических концепций, связанных с реляционными базами данных.

[[#ER-модель]]
[[#Первая нормальная форма (1NF)]]
[[#DDL]]
[[#DBMS]]
	[[#Query Optimizer]]
	[[#Transaction Manager]]
	[[#SQL Server]]
[[#CAP]]
[[#ACID]]
[[#Типы ключей]]
	[[#Первичный ключ]]
	[[#Внешний ключ]]
	[[#Составной ключ]]

## ER-модель

ER-модель (Entity-Relationship модель) — это способ представления данных в виде сущностей, атрибутов и связей между ними. Она используется для проектирования баз данных и помогает структурировать информацию в понятном и организованном виде.

**Основные компоненты ER-модели:**

1. **Сущности (Entities):** Это ключевые объекты или понятия в предметной области, которые необходимо отслеживать. Примерами сущностей могут быть "Студент", "Курс", "Преподаватель".
    
2. **Атрибуты (Attributes):** Это свойства или характеристики сущностей, которые добавляют им контекст и уникальность. Например, для сущности "Студент" атрибутами могут быть "Имя", "Фамилия", "Дата рождения", "Номер зачетной книжки".
    
3. **Связи (Relationships):** Это взаимосвязи между сущностями, которые показывают, как они взаимодействуют друг с другом. Например, связь между "Студентом" и "Курсом" может быть "посещает".

**Концептуальное представление атрибутов:**  
Атрибуты в ER-модели концептуально представляют собой детали, которые уточняют, идентифицируют, классифицируют или характеризуют сущности. Они помогают точно определить свойства и взаимосвязи элементов внутри модели, обеспечивая полное и точное представление данных.

**Пример:**  
Для сущности "Автор" атрибутами могут быть "Фамилия", "Адрес", "Телефон", "Номер счета". Эти атрибуты добавляют контекст и помогают идентифицировать каждого автора уникально.

Таким образом, атрибуты в ER-модели являются важнейшим элементом, который позволяет детализировать и уточнять характеристики сущностей, делая модель более информативной и полезной для проектирования баз данных.

## Первая нормальная форма (1NF)

**Первая нормальная форма (1NF):**  
Первая нормальная форма — это базовая нормальная форма в реляционной модели данных, которая требует, чтобы таблицы соответствовали определенным принципам для обеспечения целостности и эффективности данных.

**Основные требования 1NF:**

1. **Атомарные значения:** Каждая ячейка таблицы должна содержать только одно, не составное значение. Это означает, что в одной ячейке не должно быть списков или массивов.
    
2. **Отсутствие повторяющихся строк:** В таблице не должно быть дублирующих строк. Каждая запись должна быть уникальной.
    
3. **Порядок строк и столбцов не имеет значения:** Порядок строк и столбцов не несет в себе никакой информации. Это означает, что данные не зависят от порядка их представления.
    
4. **Обычные столбцы:** Все столбцы должны быть обычными, без скрытых компонентов или побочных эффектов при обращении к ним.

**Пример нарушения 1NF:**  
Если у вас есть таблица "Автомобили" с колонкой "Модели", где для одной фирмы перечислены несколько моделей (например, "M5, X5M, M1"), это нарушает 1NF, так как в одной ячейке содержится несколько значений.

## DDL

DDL — это **Data Definition Language**, что переводится как "Язык определения данных". Это подмножество языка SQL, используемое для создания, изменения и удаления объектов базы данных, таких как таблицы, индексы, представления и процедуры.

К нему относятся команды:
* CREATE TABLE
* CREATE INDEX
* CREATE VIEW
* CREATE PROCEDURE
* ALTER TABLE
* DROP TABLE
* TRUNCATE TABLE
* RENAME TABLE

## DBMS

**DBMS (Database Management System):** Это система управления базами данных, которая обеспечивает доступ к данным, управляет их хранением, обновлением и извлечением. DBMS включает в себя различные компоненты, такие как ядро, процессор языка базы данных, подсистемы поддержки и утилиты, которые работают вместе для предоставления доступа к данным и управления ими.

### Query Optimizer

Это компонент DBMS, который оптимизирует запросы для более эффективного выполнения, но не является службой доступа к данным в целом.

### Transaction Manager

Это часть DBMS, отвечающая за управление транзакциями, но также не является основной службой доступа к данным.

### SQL Server

Это конкретная система управления базами данных (DBMS), разработанная Microsoft, а не общий термин для службы доступа к данным.

## CAP

**CAP - consistency availability partition tolerance.**

CAP-теорема — это фундаментальная концепция в распределенных системах, которая описывает компромиссы при проектировании и эксплуатации таких систем. Она была впервые предложена Эриком Брюером в 2000 году и формально доказана Сетом Гилбертом и Нэнси Линч двумя годами позже.

**Свойства CAP-теоремы:**

1. **Согласованность (Consistency):** Это свойство гарантирует, что все копии данных в системе имеют одинаковое значение в любой момент времени. Любые изменения данных должны быть мгновенно распространены между всеми узлами.
    
2. **Доступность (Availability):** Система должна всегда быть доступна для обработки запросов и предоставления ответов, даже если некоторые узлы не функционируют.
    
3. **Устойчивость к разделению (Partition tolerance):** Система должна продолжать работать даже если соединение между узлами потеряно или осуществляется с задержками.

**Основная идея CAP-теоремы:**  
Теорема утверждает, что невозможно создать систему, которая одновременно обеспечивает все три свойства (согласованность, доступность и устойчивость к разделению). Следовательно, разработчики должны выбрать две из этих характеристик и жертвовать третьей в зависимости от требований конкретной системы.

**Возможные комбинации:**

- **CA (Consistency + Availability):** Подходит для систем, где важна согласованность и доступность, но не устойчивость к разделению. Часто используется в традиционных реляционных базах данных.
    
- **CP (Consistency + Partition tolerance):** Используется в системах, где важна согласованность и устойчивость к разделению, но доступность может быть ограничена.
    
- **AP (Availability + Partition tolerance):** Подходит для систем, где важна доступность и устойчивость к разделению, но согласованность может быть ослаблена. Часто используется в NoSQL-системах.

Таким образом, CAP-теорема помогает разработчикам осознанно выбирать компромиссы при проектировании распределенных систем.

## ACID

ACID — это набор свойств, которые обеспечивают надежную и предсказуемую обработку транзакций в системах управления базами данных. ACID — это аббревиатура, которая обозначает четыре основных свойства:

1. **Атомарность (Atomicity):** Гарантирует, что транзакция выполняется полностью или не выполняется совсем. Если во время транзакции возникает ошибка, все изменения откатываются, и база данных возвращается в исходное состояние.
2. **Согласованность (Consistency):** Обеспечивает, что база данных всегда находится в согласованном состоянии. Транзакция должна преобразовать базу данных из одного согласованного состояния в другое, соблюдая все ограничения и правила.
3. **Изоляция (Isolation):** Гарантирует, что параллельные транзакции не влияют друг на друга. Каждая транзакция должна быть изолирована от других до своего завершения.
4. **Устойчивость (Durability):** Обеспечивает, что после успешного завершения транзакции ее изменения сохраняются даже в случае системных сбоев.

Таким образом, свойства ACID являются фундаментальными для обеспечения целостности и надежности данных в базах данных, особенно в реляционных системах управления базами данных.

## Типы ключей

### Первичный ключ

**Первичный ключ (Primary Key):**  
Первичный ключ — это один или несколько столбцов в таблице реляционной базы данных, которые однозначно идентифицируют каждую запись в этой таблице. Он гарантирует, что значения в этих столбцах уникальны и не могут быть пустыми (NULL).

**Основные характеристики первичного ключа:**

1. **Уникальность:** Каждое значение в первичном ключе должно быть уникальным для всей таблицы.
    
2. **Отсутствие пустых значений:** Первичный ключ не может содержать пустые значения (NULL).
    
3. **Идентификация записей:** Он используется для идентификации каждой записи в таблице, обеспечивая, что каждая строка может быть однозначно определена.

### Внешний ключ

**Внешний ключ (Foreign Key):**  
Внешний ключ — это столбец или набор столбцов в одной таблице, который ссылается на первичный ключ другой таблицы. Он обеспечивает логическую связь между двумя таблицами и поддерживает целостность данных, гарантируя, что ссылки всегда будут указывать на существующие записи.

**Основные задачи внешнего ключа:**

1. **Связь между таблицами:** Внешний ключ позволяет связать две таблицы, создавая структурированную систему данных.
    
2. **Целостность данных:** Он предотвращает появление "пустых" ссылок и нарушение логики базы данных, обеспечивая, что значения в столбце внешнего ключа всегда соответствуют реальным записям в другой таблице.
    
3. **Контроль данных:** Внешний ключ ограничивает возможные ошибки при вставке и удалении записей, так как ссылки всегда должны указывать на существующие данные

### Составной ключ

**Составной ключ (Composite Key):**  
Составной ключ — это комбинация двух или более столбцов в таблице базы данных, которая однозначно идентифицирует каждую строку. Этот ключ используется, когда ни один из столбцов индивидуально не может обеспечить уникальность записей, но их совокупность делает записи уникальными.

**Пример:**  
В таблице "Оценки студентов" столбцы "СтудентID" и "КурсID" могут образовывать составной ключ, если каждая пара этих значений должна быть уникальной. Это означает, что один студент может иметь несколько оценок за разные курсы, но комбинация "СтудентID" и "КурсID" всегда будет уникальной.

```SQL
CREATE TABLE StudentGrades (
    StudentID INT,
    CourseID INT,
    Grade DECIMAL(3, 2),
    PRIMARY KEY (StudentID, CourseID)
);
```

**Особенности составного ключа:**

- **Уникальность:** Обеспечивает уникальность записей в таблице.
- **Несколько столбцов:** Состоит из двух или более столбцов.
- **Отсутствие NULL:** Все столбцы, входящие в составной ключ, не могут содержать NULL-значения.
- **Применение:** Часто используется в промежуточных таблицах для связывания записей из разных таблиц.

Таким образом, составной ключ является важным инструментом для поддержания целостности данных в базах данных, особенно в ситуациях, когда один столбец не может однозначно идентифицировать запись.
